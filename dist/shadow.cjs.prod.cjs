"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");function o(e){return t(e,e.childNodes)}function t(e,o){try{const t=e.shadowRoot;if(null!=t)return void console.error("[shadow] Attach shadow multiple times",e,o,t);{const t=e.attachShadow({mode:"open"});return o&&function(e,o){const t=document.createDocumentFragment();for(const e of o)t.appendChild(e);e.appendChild(t)}(t,o),t}}catch(t){console.error("[shadow] make shadow-root failed",e,o),console.error(t)}}const a=document.createDocumentFragment(),r=e.defineComponent({props:{media:String,nonce:String},setup:(o,{slots:t})=>()=>e.h("style",{media:o.media,nonce:o.nonce},t.default?.())}),n=e.defineComponent({props:{abstract:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(o,{slots:r,expose:n}){const s=e.ref(!1),l=e.ref(),d=e.ref(),u=e.ref(),c=e.computed((()=>u.value??a));return n(e.reactive({shadow_root:u})),e.onBeforeMount((()=>{s.value=o.abstract})),e.onMounted((()=>{s.value?d.value.parentElement.shadowRoot?u.value=d.value.parentElement.shadowRoot:u.value=t(d.value.parentElement):u.value=t(l.value)})),()=>{const t=e.h(e.Teleport,{ref:d,to:c.value},[r.default?.()]);return s.value?t:e.h(o.tag,{ref:l},t)}},install:s,Style:r});function s(e){e.component("shadow-root",n),e.directive("shadow",{beforeMount(e){o(e)}})}var l={ShadowRoot:n,ShadowStyle:r,shadow_root:n,shadow_style:r,install:s};exports.ShadowRoot=n,exports.ShadowStyle=r,exports.default=l,exports.install=s,exports.makeShadow=o,exports.makeShadowRaw=t,exports.shadow_root=n,exports.shadow_style=r;
//# sourceMappingURL=shadow.cjs.prod.cjs.map

const{defineComponent:e,h:o,ref:t,Teleport:a,onBeforeMount:n,onMounted:r,computed:s,reactive:l}=globalThis.Vue;function d(e){return u(e,e.childNodes)}function u(e,o){try{const t=e.shadowRoot;if(null!=t)return void console.error("[shadow] Attach shadow multiple times",e,o,t);{const t=e.attachShadow({mode:"open"});return o&&function(e,o){const t=document.createDocumentFragment();for(const e of o)t.appendChild(e);e.appendChild(t)}(t,o),t}}catch(t){console.error("[shadow] make shadow-root failed",e,o),console.error(t)}}const c=document.createDocumentFragment(),i=e({props:{media:String,nonce:String},setup:(e,{slots:t})=>()=>o("style",{media:e.media,nonce:e.nonce},t.default?.())}),h=e({props:{abstract:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e,{slots:d,expose:i}){const h=t(!1),p=t(),f=t(),m=t(),v=s((()=>m.value??c));return i(l({shadow_root:m})),n((()=>{h.value=e.abstract})),r((()=>{h.value?f.value.parentElement.shadowRoot?m.value=f.value.parentElement.shadowRoot:m.value=u(f.value.parentElement):m.value=u(p.value)})),()=>{const t=o(a,{ref:f,to:v.value},[d.default?.()]);return h.value?t:o(e.tag,{ref:p},t)}},install:p,Style:i});function p(e){e.component("shadow-root",h),e.directive("shadow",{beforeMount(e){d(e)}})}var f={ShadowRoot:h,ShadowStyle:i,shadow_root:h,shadow_style:i,install:p};export{h as ShadowRoot,i as ShadowStyle,f as default,p as install,d as makeShadow,u as makeShadowRaw,h as shadow_root,i as shadow_style};
//# sourceMappingURL=shadow.esm-browser.prod.mjs.map

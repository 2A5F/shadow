import{defineComponent as e,h as o,ref as t,computed as a,reactive as n,onBeforeMount as r,onMounted as s,Teleport as l}from"vue";function d(e){return u(e,e.childNodes)}function u(e,o){try{const t=e.shadowRoot;if(null!=t)return void console.error("[shadow] Attach shadow multiple times",e,o,t);{const t=e.attachShadow({mode:"open"});return o&&function(e,o){const t=document.createDocumentFragment();for(const e of o)t.appendChild(e);e.appendChild(t)}(t,o),t}}catch(t){console.error("[shadow] make shadow-root failed",e,o),console.error(t)}}const c=document.createDocumentFragment(),i=e({props:{media:String,nonce:String},setup:(e,{slots:t})=>()=>o("style",{media:e.media,nonce:e.nonce},t.default?.())}),h=e({props:{abstract:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e,{slots:d,expose:i}){const h=t(!1),p=t(),m=t(),f=t(),v=a((()=>f.value??c));return i(n({shadow_root:f})),r((()=>{h.value=e.abstract})),s((()=>{h.value?m.value.parentElement.shadowRoot?f.value=m.value.parentElement.shadowRoot:f.value=u(m.value.parentElement):f.value=u(p.value)})),()=>{const t=o(l,{ref:m,to:v.value},[d.default?.()]);return h.value?t:o(e.tag,{ref:p},t)}},install:p,Style:i});function p(e){e.component("shadow-root",h),e.directive("shadow",{beforeMount(e){d(e)}})}var m={ShadowRoot:h,ShadowStyle:i,shadow_root:h,shadow_style:i,install:p};export{h as ShadowRoot,i as ShadowStyle,m as default,p as install,d as makeShadow,u as makeShadowRaw,h as shadow_root,i as shadow_style};
//# sourceMappingURL=shadow.esm-bundler.prod.mjs.map
